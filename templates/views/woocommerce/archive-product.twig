{% extends 'base.twig' %}

{% block content %}
  <article class="archive">

    <section class="wrapper wrapper--article-content">
      <div class="article-content container">

				{##
					# woocommerce_before_main_content hook.
					#
					# @hooked woocommerce_output_content_wrapper - 10 (outputs opening divs for the content)
					# @hooked woocommerce_breadcrumb - 20
					# @hooked WC_Structured_Data::generate_website_data() - 30
					#}
				{% do action('woocommerce_before_main_content') %}

				<h1 class="h1 main-title" id="main-title">{{ title }}</h1>

        {{ breadcrumb }}

			</div>
		</section>

		<section class="wrapper bg-product-img">
			<div class="container">
				<div class="woo-archive-description">
					{#
						# woocommerce_archive_description hook.
						#
						# @hooked woocommerce_taxonomy_archive_description - 10
						# @hooked woocommerce_product_archive_description - 10
						#}
					{% do action('woocommerce_archive_description') %}
				</div>

			</div>
		</section>

		<section class="wrapper bg-gray-lighter overflow-hidden">
			<div class="container">
				<div class="woo-products-header">
					{#
						# woocommerce_before_shop_loop hook.
						#
						# @hooked wc_print_notices - 10
						# @hooked woocommerce_result_count - 20
						# @hooked woocommerce_catalog_ordering - 30
						#}
					{% do action('woocommerce_before_shop_loop') %}
				</div>
			</div>
		</section>

		<section class="wrapper wrapper--padding-half">
			<div class="container">

				{# SUB-CATEGORIES #}
	
				{% if subcategories and (subcategories|length > 0) %}{# WTF??? #}
					{# <h2>{{ subcategories|length }} cat√©gories</h2> #}
					<div class="woo-list woo-list--categories">
						{% for category in subcategories %}
							<li class="woo-item">
								{% include 'woocommerce/teaser-category.twig' %}
							</li>
						{% endfor %}
					</div>
				{% endif %}

				{# PRODUCTS #}

				{% if posts %}
					{# <h2>{{ posts|length }} produits</h2> #}
					<ul class="woo-list woo-list--products">
						{% do fn('woocommerce_product_subcategories') %}

						{##
							# Depending on your WooCommerce display settings, the `woocommerce_product_subcategories` function
							# might reset the $wp_query global. By calling `have_posts()`, we check if there are posts we can
							# display.
							#}
						{% for post in posts if fn('have_posts') %}
							<li class="woo-item">
								{% include 'woocommerce/teaser-product.twig' %}
							</li>
						{% endfor %}
					</ul>

				{% elseif not fn('woocommerce_product_subcategories', [{
					before: fn('woocommerce_product_loop_start', false),
					after: fn('woocommerce_product_loop_end', false)
				}]) %}
					{##
						# woocommerce_no_products_found hook.
						#
						# @hooked wc_no_products_found - 10
						#}
					{% do action('woocommerce_no_products_found') %}

				{% endif %}

				{##
					# woocommerce_after_shop_loop hook.
					#
					# @hooked woocommerce_pagination - 10
					#}
				{% do action('woocommerce_after_shop_loop') %}

				{##
					# woocommerce_after_main_content hook.
					#
					# @hooked woocommerce_output_content_wrapper_end - 10 (outputs closing divs for the content)
					#}
				{% do action('woocommerce_after_main_content') %}

				{#
					# woocommerce_sidebar hook.
					#
					# @hooked woocommerce_get_sidebar - 10
					#}
				{# {% do_action('woocommerce_sidebar') %} #}

			</div>
		</section>

	</article>

{% endblock %}
